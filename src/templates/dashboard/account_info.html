{% extends 'dashboard/_DashMain.html' %}
{% block title %}
    <title>
             اطلاعات حساب کاربری
    </title>
{% endblock %}
{% load static %}
{% block customCss %}
<link rel="stylesheet" href="{% static 'css/account_info.css' %}">
{#<link rel="stylesheet" href="{% static 'css/sorchi_txt.css' %}">#}
{#<link rel="stylesheet" href="{% static 'css/sorchi_btn.css' %}">#}
<link rel="stylesheet" href="{% static 'css/cal/persian-datepicker.min.css' %}">
{% endblock %}
{% block content %}
<div class="w-full px-6 py-6 mx-auto">
<div class="container-fluid">
    <div class="row mb-4">
        <div class="content">
            <div class="row">
                <div class="flex flex-col items-center justify-center ">

                    <h2>اطلاعات حساب کاربری</h2>
                    <form action="{% url 'account:UpdateAccount' %}" method="post" class="w-[350px] lg:w-[520px]"  enctype="multipart/form-data">
                        {% csrf_token %}
                     <div class="avatar-upload">
                        <div class="avatar-edit">

                        </div>
                        <div class="avatar-preview">
                        {% if account.profile_image %}
                            <div id="imagePreview" style="background-image: url('{{ account.profile_image.url }}');"></div>
                        {% else %}
                            <div id="imagePreview" style="background-image: url('{% static "img/default-profile.jpg" %}');"></div>
                        {% endif %}
                        </div>
                     </div>
                     <div class="form-fields  p-10" style="min-height: 548px;border-radius: 8px;padding: 30px;border:1px solid gray;background-color: white">


                        <p style="display: flex; flex-direction: row; justify-content: space-between;"><span class="field-label"> تصویر پروفایل  :</span> <input type="file" class="field-value"  name="profile_image" required></p>
                        <p style="display: flex; flex-direction: row; justify-content: space-between;"><span class="field-label">نام و نام خانوادگی:</span> <input class="field-value" value="{{ account.name }}" name="name"></p>
                        <p style="display: flex; flex-direction: row; justify-content: space-between;"><span class="field-label">نام کاربری:</span> <input class="field-value" value="{{ account.username }}" name="username"></p>
                        <p style="display: flex; flex-direction: row; justify-content: space-between;"><span class="field-label">شماره تلفن:</span> <input class="field-value" value="{{ account.phone }}" name="phone"></p>
                        <p style="display: flex; flex-direction: row; justify-content: space-between;"><span class="field-label">کشور:</span> <input class="field-value" value="{{ account.country }}" name="country"></p>
                        <p style="display: flex; flex-direction: row; justify-content: space-between;"><span class="field-label">شهر:</span> <input class="field-value" value="{{ account.city }}" name="city"></p>
                        <p style="display: flex; flex-direction: row; justify-content: space-between;"><span class="field-label">ایمیل:</span> <input class="field-value" value="{{ account.email }}" name="email"></p>
                        <p style="display: flex; flex-direction: row; justify-content: space-between;"><span class="field-label">تاریخ تولد:</span> <input class="field-value" value="{{ user.birthday }}" id="birthday_id" name="birthday"></p>
                        <p style="display: flex; flex-direction: row; justify-content: space-between;"><span class="field-label">جنسیت:</span> <input class="field-value" value="{{ account.gender }}" name="gender"></p>
                        <p style="display: flex; flex-direction: row; justify-content: space-between;"><span class="field-label">تحصیلات:</span> <input class="field-value" value="{{ account.education }}" name="education"></p>
                        <p style="display: flex; flex-direction: row; justify-content: space-between;"><span class="field-label">آدرس شبکه اجتماعی:</span> <input class="field-value" value="{{ account.social_media }}" name="social_media"></p>
                        <p style="display: flex; flex-direction: row; justify-content: space-between;"><span class="field-label">آدرس:</span> <input class="field-value" value="{{ account.address }}" name="address"></p>


                    </div>
                    <div class="" style="display: flex;align-items: center;justify-content: center;">
                    <button class="inline-block w-full px-6 py-2 my-8 text-xs font-bold leading-normal text-center text-white capitalize transition-all ease-in rounded-lg shadow-md bg-slate-700 bg-150 hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] hover:-translate-y-px  lg:w-[400px] ">ارسال</button>
                    </div>
                 </form>
                    {% if viral_counter %}
                        <p>تعداد وایرال: {{ viral_counter }}</p>
                    {% endif %}

                    {% if message %}
                        <p>{{ message }}</p>
                    {% endif %}
                </div>
                {% if account.is_Business %}
                    <!-- Display business-specific information -->
                    <div class="flex flex-col items-center justify-center">
                        <h2>اطلاعات کسب و کار شما</h2>
                        <form action="{% url 'account:UpdateBusiness'  %}" method="post"  class="w-[350px] lg:w-[520px]" enctype="multipart/form-data">
                            {% csrf_token %}
                        <div class="avatar-upload2">
                            <div class="avatar-edit">
                            </div>
                            <div class="avatar-preview">
                            {% if account_info.profile_image.url != "" %}
                                <div id="imagePreview2" style="background-image: url('{{ business.profile_image }}');"></div>
                            {% else %}
                                <div id="imagePreview2" style="background-image: url('{% static "img/default-profile.jpg" %}');"></div>
                            {% endif %}
                            </div>
                        </div>
                        <div class="form-fields2" style="border-radius: 8px;padding: 30px;border:1px solid gray;background-color: white">

                            <p style="display: flex; flex-direction: row; justify-content: space-between;"><span class="field-label"> لوگوی کسب و کار   :</span> <input type="file" class="field-value"  name="profile_image" required></p>
                            <p style="display: flex;flex-direction: row;justify-content: space-between"><span class="field-label">نام کسب و کار:</span><input style="text-align: start" class="field-value" value="{{business.B_name }}" name="B_name"></p>
                            <p style="display: flex;flex-direction: row;justify-content: space-between"><span class="field-label">کد کسب و کار:</span><input class="field-value" value="{{business.Nationalcode }}" name="Nationalcode"></p>
                            <p style="display: flex;flex-direction: row;justify-content: space-between"><span class="field-label">آدرس وبسایت:</span><input class="field-value" value="{{business.web_address }}" name="web_address"></p>
                            <p style="display: flex;flex-direction: row;justify-content: space-between"><span class="field-label">شبکه اجتماعی:</span><input class="field-value" value="{{business.social_network }}" name="social_network"></p>
                            <p style="display: flex;flex-direction: row;justify-content: space-between"><span class="field-label">آدرس:</span><input class="field-value" value="{{business.shop_address }}" name="shop_address"></p>
                            <p style="display: flex;flex-direction: row;justify-content: space-between"><span class="field-label">شماره تلفن:</span><input class="field-value" value="{{business.B_phone }}" name="B_phone"></p>
                        </div>
                        <div style="display: flex;align-items: center;justify-content: center">
                         <button class="inline-block w-full px-6 py-2 my-8 text-xs font-bold leading-normal text-center text-white capitalize transition-all ease-in rounded-lg shadow-md bg-slate-700 bg-150 hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] hover:-translate-y-px lg:w-[400px] " type="submit">ارسال</button>
                        </div>
                    </form>
                    </div>
                    {% else %}
                    <div class="col-md-6">
                    <h1>برای ساخت بازی و سورلینک نیاز دارید که حساب خود را به <a href="{% url "account:signupBusiness" %}"> کسب و کاری </a> ارتقا دهید.</h1>
                </div>
                    <p>{{message}}</p>

                    {% endif %}
                </div>
            </div>
    </div>
</div>
</div>
<script src="{% static 'js/cal/jquery-3.2.1.min.js' %}"></script>
<script>
    function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            reader.onload = function(e) {
                $('#imagePreview').css('background-image', 'url('+e.target.result +')');
                $('#imagePreview').hide();
                $('#imagePreview').fadeIn(650);
            }
            reader.readAsDataURL(input.files[0]);
        }
    }
    $("#imageUpload").change(function() {
        readURL(this);
    });

    function readURL2(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            reader.onload = function(e) {
                $('#imagePreview2').css('background-image', 'url('+e.target.result +')');
                $('#imagePreview2').hide();
                $('#imagePreview2').fadeIn(650);
            }
            reader.readAsDataURL(input.files[0]);
        }
    }
    $("#imageUpload2").change(function() {
        readURL2(this);
    });
</script>
<script src="{% static 'js/cal/persian-date.min.js' %}"></script>
<script src="{% static 'js/cal/persian-datepicker.min.js' %}"></script>
<script type="text/javascript">

      $('#birthday_id').persianDatepicker({
          observer: true,
          format: 'YYYY/MM/DD',
          altField: '.observer-example-alt',
          autoClose: true,
      });

</script>
{% endblock %}
