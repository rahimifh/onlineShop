{% extends "shop/base.html" %}
{% load static %}
{% load humanize %}
{% block title %}
  {% if category %}{{ category.name }}{% else %}محصولات{% endif %}
{% endblock %}

{% block content %}
{#  Hero  #}

<!-- Hero Section -->
{% include 'shop/components/Hero.html' %}
 <!-- End Hero Section  -->

  <div id="main" class="w-full md:w-[80%] h-auto   mb-10 md:mb-24 mx-auto">

    <div class="flex gap-4 text-gray-500 h-16 items-center">
      <a href="#newest">جدیدترین</a>
      <a href="#chipest">ارزانترین</a>
      <a href="#popular">محبوبترین</a>
      <a href="#expensive">گرانترین</a>
    </div>
    <div>
      <div class="bg-red-800 text-white lg:rounded-xl p-2" style="background-image: url({% static 'img/bg.jpg' %});">
      <div class="w-full flex justify-between lg:px-10 font-AnjomanMax_Bold ">
        <h2>فروش ویژه</h2>
      </div>
      <div class="  overflow-scroll ">
        <div class="inline-flex gap-4 w-auto lg:py-6">
        {% for item in special %}
          {% for product in item.products.all %}
          <a href="{{ product.get_absolute_url }}">
            <div class=" w-40 lg:w-52  bg-white text-black rounded-xl text-sm  mx-auto lg:mx-2  ">
                
                  <img class="w-auto rounded-xl" src="{% if product.image %}{{ product.image.url }}{% else %}{% static 'img/no_image.png' %}{% endif %}">
         
                <div class="productDetail">
                  <p class="font-AnjomanMax_Thin text-sm flex flex-wrap  lg:text-base " href="{{ product.get_absolute_url }}">{{ product.name | truncatechars:75 }}</p>
                  <div class="flex w-full justify-around">
                    {% if product.discount  %} <p class="bg-red-800 text-white rounded-full h-5 w-8  font-bold text-center">%{{product.discount}}</p>{% endif %}

                      {% if product.discount != 0 %} 
                      <div class="h-16">
                        <p class="text-red-800 line-through font-AnjomanMax_Regular lg:font-AnjomanMax_Black">{{ product.price | intcomma }} تومان </p>
                      
                      <p class="text-green-800 font-AnjomanMax_Regular lg:font-AnjomanMax_Black">{{product.get_final_price | intcomma }} تومان</p>
                    </div>
                    {% else %}
                    <div class="h-16">
                      <p class="text-green-800  font-AnjomanMax_Regular lg:font-AnjomanMax_Black">{{ product.price | intcomma }} تومان </p>

                  </div>
                      {% endif %}

                  
                    
                  </div>
                </div>
              </div>
          </a>
          {% endfor %}
        {% endfor %}
      </div>
      </div>
    </div>
    <div id="newest">
      <hr class="my-2">
      <div class="w-full flex justify-between px-10 font-AnjomanMax_Bold ">
        <h2>جدیدترین ها</h2>
        <h2><a class="my-4" href="{% url 'shop:product_list' %}">مشاهده همه</a></h2>
      </div>
    <div class="productBox">
    {% for product in products %}
    <a href="{{ product.get_absolute_url }}">
      <div class="item  mx-auto lg:mx-2  ">
          
            <img class="productImg" src="{% if product.image %}{{ product.image.url }}{% else %}{% static 'img/no_image.png' %}{% endif %}">
       
            <div class="productDetail">
              <p class="proname" >{{ product.name | truncatechars:75 }}</p>
              <div class="flex w-full justify-around">
                {% if product.available == True %} <p class="text-green-500 text-sm">موجود  در انبار</p>{% else %} <p class="text-red-500 text-sm">موجود نیست</p>{% endif %}
              
                {% if product.discount != 0 %} 
                <div class="h-16">
                  <p class="text-red-800 line-through font-AnjomanMax_Regular lg:font-AnjomanMax_Black">{{ product.price | intcomma }} تومان </p>
                <p class="text-red-800 font-AnjomanMax_Regular lg:font-AnjomanMax_Black">%{{product.discount}}</p>
                <p class="text-green-800 font-AnjomanMax_Regular lg:font-AnjomanMax_Black">{{product.get_final_price | intcomma }} تومان</p>
              </div>
              {% else %}
              <div class="h-16">
                <p class="text-green-800  font-AnjomanMax_Regular lg:font-AnjomanMax_Black">{{ product.price | intcomma }} تومان </p>
  
            </div>
                {% endif %}
              </div>
            </div>
        </div>
      </a>
    {% endfor %}
  </div>
</div>
  <div class="mt-10">
    <div class="w-full text-center">
      <h2>
        خرید براساس دسته بندی
      </h2>
    </div>
    <div class="flex flex-wrap justify-center gap-4 px-2 lg:gap-12 lg:px-20 mt-4 lg:mb-20">
    {% for c in categories %}
        <div class="">
            <a class="text-center "  href="{{ c.get_absolute_url }}">
              <div class="size-16 lg:size-32 bg-gray-100 rounded-full overflow-visible justify-center items-center" >
                {% if c.image %}<img src="{{c.image.url}}" alt="">{% endif %}
              </div>
              <p class="mx-auto text-xs font-bold text-ellipsis w-16 lg:w-32">{{ c.name }}</p>
              </a>
    </div>
    {% endfor %}
  </div>
  </div>

  <div id="chipest">
    <hr class="my-2">
    <div class="w-full flex justify-between px-10 font-AnjomanMax_Bold ">
      <h2>ارزانترین ها </h2>
      <h2><a class="my-4" href="{% url 'shop:product_list' %}">مشاهده همه</a></h2>
    </div>
    <div class="productBox">
      {% for product in chipest %}
      <a href="{{ product.get_absolute_url }}">
        <div class="item  mx-auto lg:mx-2  ">
              <img class="productImg" src="{% if product.image %}{{ product.image.url }}{% else %}{% static 'img/no_image.png' %}{% endif %}">
         
              <div class="productDetail">
                <p class="proname" >{{ product.name | truncatechars:75 }}</p>
                <div class="flex w-full justify-around">
                  {% if product.available == True %} <p class="text-green-500 text-sm">موجود  در انبار</p>{% else %} <p class="text-red-500 text-sm">موجود نیست</p>{% endif %}
                
                  {% if product.discount != 0 %} 
                  <div class="h-16">
                    <p class="text-red-800 line-through font-AnjomanMax_Regular lg:font-AnjomanMax_Black">{{ product.price | intcomma }} تومان </p>
                  <p class="text-red-800 font-AnjomanMax_Regular lg:font-AnjomanMax_Black">%{{product.discount}}</p>
                  <p class="text-green-800 font-AnjomanMax_Regular lg:font-AnjomanMax_Black">{{product.get_final_price | intcomma }} تومان</p>
                </div>
                {% else %}
                <div class="h-16">
                  <p class="text-green-800  font-AnjomanMax_Regular lg:font-AnjomanMax_Black">{{ product.price | intcomma }} تومان </p>
    
              </div>
                  {% endif %}
                </div>
              </div>
          </div>
        </a>
      {% endfor %}
    </div>
</div>
<div  id="popular">
  <hr class="my-2">
  <div class="w-full flex justify-between px-10 font-AnjomanMax_Bold ">
    <h2>محبوبترین ها</h2>
    <h2><a class="my-4" href="{% url 'shop:product_list' %}">مشاهده همه</a></h2>
  </div>
  <div class="productBox">
    {% for product in mid %}
    <a href="{{ product.get_absolute_url }}">
      <div class="item  mx-auto lg:mx-2  ">
            <img class="productImg" src="{% if product.image %}{{ product.image.url }}{% else %}{% static 'img/no_image.png' %}{% endif %}">
       
            <div class="productDetail">
              <p class="proname" >{{ product.name | truncatechars:75 }}</p>
              <div class="flex w-full justify-around">
                {% if product.available == True %} <p class="text-green-500 text-sm">موجود  در انبار</p>{% else %} <p class="text-red-500 text-sm">موجود نیست</p>{% endif %}
              
                {% if product.discount != 0 %} 
                <div class="h-16">
                  <p class="text-red-800 line-through font-AnjomanMax_Regular lg:font-AnjomanMax_Black">{{ product.price | intcomma }} تومان </p>
                <p class="text-red-800 font-AnjomanMax_Regular lg:font-AnjomanMax_Black">%{{product.discount}}</p>
                <p class="text-green-800 font-AnjomanMax_Regular lg:font-AnjomanMax_Black">{{product.get_final_price | intcomma }} تومان</p>
              </div>
              {% else %}
              <div class="h-16">
                <p class="text-green-800  font-AnjomanMax_Regular lg:font-AnjomanMax_Black">{{ product.price | intcomma }} تومان </p>
  
            </div>
                {% endif %}
              </div>
            </div>
        </div>
      </a>
    {% endfor %}
  </div>
</div>
<div id="expensive">
  <hr class="my-2">
  <div class="w-full flex justify-between px-10 font-AnjomanMax_Bold ">
    <h2>گرانترین ها</h2>
    <h2><a class="my-4" href="{% url 'shop:product_list' %}">مشاهده همه</a></h2>
  </div>
  
  <div class="productBox">
    {% for product in expensive %}
    <a href="{{ product.get_absolute_url }}">
      <div class="item  mx-auto lg:mx-2  ">
            <img class="productImg" src="{% if product.image %}{{ product.image.url }}{% else %}{% static 'img/no_image.png' %}{% endif %}">
       
            <div class="productDetail">
              <p class="proname" >{{ product.name | truncatechars:75 }}</p>
              <div class="flex w-full justify-around">
                {% if product.available == True %} <p class="text-green-500 text-sm">موجود  در انبار</p>{% else %} <p class="text-red-500 text-sm">موجود نیست</p>{% endif %}
              
                {% if product.discount != 0 %} 
                <div class="h-16">
                  <p class="text-red-800 line-through font-AnjomanMax_Regular lg:font-AnjomanMax_Black">{{ product.price | intcomma }} تومان </p>
                <p class="text-red-800 font-AnjomanMax_Regular lg:font-AnjomanMax_Black">%{{product.discount}}</p>
                <p class="text-green-800 font-AnjomanMax_Regular lg:font-AnjomanMax_Black">{{product.get_final_price | intcomma }} تومان</p>
              </div>
              {% else %}
              <div class="h-16">
                <p class="text-green-800  font-AnjomanMax_Regular lg:font-AnjomanMax_Black">{{ product.price | intcomma }} تومان </p>
  
            </div>
                {% endif %}
              </div>
            </div>
        </div>
      </a>
    {% endfor %}
  </div>
</div>
</div>
  </div>
{% endblock %}
